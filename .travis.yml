sudo: required

language: cpp
compiler:
    - gcc
    - clang

install:
    - if [ "$CXX" = "g++" ]; then export CXX="g++-6"; fi

addons:
    apt:
        sources:
            - ubuntu-toolchain-r-test
            - george-edison55-precise-backports
        packages:
            - g++-6
            - lcov
            - libgtest-dev
            - cmake
            - cmake-data
            - clang

        coverity_scan:
            name: MatrixLibs
            version: 1.0
            description: matrix library
            notification_email: michalkielan6@gmail.com


before_script:
#    - git clone https://github.com/google/benchmark
#    - cd benchmark
#    - mkdir build
#    - cd build
#    - cmake -DCMAKE_BUILD_TYPE=Release -DBENCHMARK_ENABLE_LTO=true ..
#   - make
#    - sudo make install
#    - cd ../..
    - "cd /usr/src/gtest && sudo cmake . && sudo cmake --build . && sudo mv libg* /usr/local/lib/ ; cd -"
    - "wget -O - http://apt.llvm.org/llvm-snapshot.gpg.key|sudo apt-key add -"
    - "apt-get install clang-3.8 clang-3.8-doc libclang-common-3.8-dev libclang-3.8-dev libclang1-3.8 libclang1-3.8-dbg libllvm-3.8-ocaml-dev libllvm3.8 libllvm3.8-dbg lldb-3.8 llvm-3.8 llvm-3.8-dev llvm-3.8-doc llvm-3.8-examples llvm-3.8-runtime clang-modernize-3.8 clang-format-3.8 python-clang-3.8 lldb-3.8-dev"

script: 
    - mkdir build
    - cd build
    - cmake -DBUILD_BENCH=OFF .. 
    - make VERBOSE=1 
    - make test

branch_pattern: master
